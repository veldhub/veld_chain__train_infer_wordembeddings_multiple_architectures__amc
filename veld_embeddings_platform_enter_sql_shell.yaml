x-veld:
  chain:
    description: "note that this service requires an interactive termina session. Thus it should be 
      run with `docker compose -f veld_embeddings_platform_enter_sql_shell.yaml run 
      veld_embeddings_platform_enter_sql_shell`"

services:

  veld_embeddings_platform_enter_sql_shell:
    extends:
      file: ./code/veld_code__embeddings_platform/veld_enter_shell.yaml
      service: veld_embeddings_platform_enter_shell
    volumes:
      - ./data/veld_data__embeddings_platform/postgres/history/:/veld/storage/postgres/history/
    environment:
      POSTGRES_USER: "postgres_user"
      POSTGRES_PASSWORD: "postgres_password"
      POSTGRES_DB: "postgres_db"
      POSTGRES_HOST: "veld_embeddings_platform_run_db_server"
    networks:
      - postgres_network

networks:
  postgres_network:
    driver: bridge

